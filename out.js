!function(){"use strict";const t=Symbol("solid-proxy"),e={equals:(t,e)=>t===e};let n=A;const i={},r={owned:null,cleanups:null,context:null,owner:null};var o=null;let l=null,s=null,c=null,a=null,u=null,d=0;function f(t,n){n=n?Object.assign({},e,n):e;const r={value:t,observers:null,observerSlots:null,pending:i,comparator:n.equals||void 0};return[y.bind(r),t=>("function"==typeof t&&(t=t(r.pending!==i?r.pending:r.value)),w(r,t))]}function h(t,e,n){k(x(t,e,!1))}function g(t,n,r){r=r?Object.assign({},e,r):e;const o=x(t,n,!0);return o.pending=i,o.observers=null,o.observerSlots=null,o.state=0,o.comparator=r.equals||void 0,k(o),y.bind(o)}function p(t){if(c)return t();let e;const n=c=[];try{e=t()}finally{c=null}return C((()=>{for(let t=0;t<n.length;t+=1){const e=n[t];if(e.pending!==i){const t=e.pending;e.pending=i,w(e,t)}}}),!1),e}function b(t){let e,n=s;return s=null,e=t(),s=n,e}function m(){return s}function v(t){const e=g(t);return g((()=>E(e())))}function y(){if(this.state&&this.sources){const t=a;a=null,1===this.state?k(this):_(this),a=t}if(s){const t=this.observers?this.observers.length:0;s.sources?(s.sources.push(this),s.sourceSlots.push(t)):(s.sources=[this],s.sourceSlots=[t]),this.observers?(this.observers.push(s),this.observerSlots.push(s.sources.length-1)):(this.observers=[s],this.observerSlots=[s.sources.length-1])}return this.value}function w(t,e,n){return t.comparator&&t.comparator(t.value,e)?e:c?(t.pending===i&&c.push(t),t.pending=e,e):(t.value=e,!t.observers||a&&!t.observers.length||C((()=>{for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];l,n.observers&&2!==n.state&&N(n),n.state=1,n.pure?a.push(n):u.push(n)}if(a.length>1e6)throw a=[],new Error}),!1),e)}function k(t){if(!t.fn)return;O(t);const e=o,n=s,i=d;s=o=t,function(t,e,n){let i;try{i=t.fn(e)}catch(t){$(t)}(!t.updatedAt||t.updatedAt<=n)&&(t.observers&&t.observers.length?w(t,i):t.value=i,t.updatedAt=n)}(t,t.value,i),s=n,o=e}function x(t,e,n,i){const l={fn:t,state:1,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:o,context:null,pure:n};return null===o||o!==r&&(o.owned?o.owned.push(l):o.owned=[l]),l}function S(t){let e=1===t.state&&t,n=[];if(t.suspense&&b(t.suspense.inFallback))return t.suspense.effects.push(t);for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<d);)2===t.state?n.push(t):1===t.state&&(e=t,n=[]);if(n.length){for(let t=n.length-1;t>=0;t--){const e=a;a=null,_(n[t]),a=e}if(!e||1!==e.state)return}e&&k(e)}function C(t,e){if(a)return t();let i=!1;e||(a=[]),u?i=!0:u=[],d++;try{t()}catch(t){$(t)}finally{!function(t){a&&(A(a),a=null);if(t)return;u.length?p((()=>{n(u),u=null})):u=null}(i)}}function A(t){for(let e=0;e<t.length;e++)S(t[e])}function _(t){t.state=0;for(let e=0;e<t.sources.length;e+=1){const n=t.sources[e];n.sources&&(1===n.state?S(n):2===n.state&&_(n))}}function N(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=2,n.observers&&N(n))}}function O(t){let e;if(t.sources)for(;t.sources.length;){const e=t.sources.pop(),n=t.sourceSlots.pop(),i=e.observers;if(i&&i.length){const t=i.pop(),r=e.observerSlots.pop();n<i.length&&(t.sourceSlots[r]=n,i[n]=t,e.observerSlots[n]=r)}}if(t.owned){for(e=0;e<t.owned.length;e++)O(t.owned[e]);t.owned=null}if(t.cleanups){for(e=0;e<t.cleanups.length;e++)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function $(t){throw t}function E(t){if("function"==typeof t&&!t.length)return E(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const i=E(t[n]);Array.isArray(i)?e.push.apply(e,i):e.push(i)}return e}return t}function j(t,e){return b((()=>t(e)))}function P(t){let e=!1;const n=v((()=>t.children)),i=g((()=>{let t=n();Array.isArray(t)||(t=[t]);for(let e=0;e<t.length;e++){const n=t[e].when;if(n)return[e,n,t[e]]}return[-1]}),void 0,{equals:(t,n)=>t&&t[0]===n[0]&&(e?t[1]===n[1]:!t[1]==!n[1])&&t[2]===n[2]});return g((()=>{const[n,r,o]=i();if(n<0)return t.fallback;const l=o.children;return(e="function"==typeof l&&l.length>0)?b((()=>l(r))):l}))}function L(t){return t}function T(t,e,n){let i=n.length,r=e.length,o=i,l=0,s=0,c=e[r-1].nextSibling,a=null;for(;l<r||s<o;)if(e[l]!==n[s]){for(;e[r-1]===n[o-1];)r--,o--;if(r===l){const e=o<i?s?n[s-1].nextSibling:n[o-s]:c;for(;s<o;)t.insertBefore(n[s++],e)}else if(o===s)for(;l<r;)a&&a.has(e[l])||t.removeChild(e[l]),l++;else if(e[l]===n[o-1]&&n[s]===e[r-1]){const i=e[--r].nextSibling;t.insertBefore(n[s++],e[l++].nextSibling),t.insertBefore(n[--o],i),e[r]=n[o]}else{if(!a){a=new Map;let t=s;for(;t<o;)a.set(n[t],t++)}const i=a.get(e[l]);if(null!=i)if(s<i&&i<o){let c,u=l,d=1;for(;++u<r&&u<o&&null!=(c=a.get(e[u]))&&c===i+d;)d++;if(d>i-s){const r=e[l];for(;s<i;)t.insertBefore(n[s++],r)}else t.replaceChild(n[s++],e[l++])}else l++;else t.removeChild(e[l++])}}else l++,s++}const D="_$DX_DELEGATE";function I(t,e,n){let i;return function(t,e){e&&(o=e);const n=s,i=o,l=0===t.length?r:{owned:null,cleanups:null,context:null,owner:i};let c;o=l,s=null;try{C((()=>c=t((()=>O(l)))),!0)}finally{s=n,o=i}}((r=>{i=r,R(e,t(),e.firstChild?null:void 0,n)})),()=>{i(),e.textContent=""}}function M(t,e,n){const i=document.createElement("template");i.innerHTML=t;let r=i.content.firstChild;return n&&(r=r.firstChild),r}function R(t,e,n,i){if(void 0===n||i||(i=[]),"function"!=typeof e)return q(t,e,i,n);h((i=>q(t,e(),i,n)),i)}function B(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get:()=>n});null!==n;){const i=n[e];if(i&&!n.disabled){const r=n[`${e}Data`];if(void 0!==r?i(r,t):i(t),t.cancelBubble)return}n=n.host&&n.host!==n&&n.host instanceof Node?n.host:n.parentNode}}function q(t,e,n,i,r){for(;"function"==typeof n;)n=n();if(e===n)return n;const o=typeof e,l=void 0!==i;if(t=l&&n[0]&&n[0].parentNode||t,"string"===o||"number"===o)if("number"===o&&(e=e.toString()),l){let r=n[0];r&&3===r.nodeType?r.data=e:r=document.createTextNode(e),n=z(t,n,i,r)}else n=""!==n&&"string"==typeof n?t.firstChild.data=e:t.textContent=e;else if(null==e||"boolean"===o)n=z(t,n,i);else{if("function"===o)return h((()=>{let r=e();for(;"function"==typeof r;)r=r();n=q(t,r,n,i)})),()=>n;if(Array.isArray(e)){const o=[];if(F(o,e,r))return h((()=>n=q(t,o,n,i,!0))),()=>n;if(0===o.length){if(n=z(t,n,i),l)return n}else Array.isArray(n)?0===n.length?J(t,o,i):T(t,n,o):null==n||""===n?J(t,o):T(t,l&&n||[t.firstChild],o);n=o}else if(e instanceof Node){if(Array.isArray(n)){if(l)return n=z(t,n,i,e);z(t,n,null,e)}else null!=n&&""!==n&&t.firstChild?t.replaceChild(e,t.firstChild):t.appendChild(e);n=e}}return n}function F(t,e,n){let i=!1;for(let r=0,o=e.length;r<o;r++){let o,l=e[r];if(l instanceof Node)t.push(l);else if(null==l||!0===l||!1===l);else if(Array.isArray(l))i=F(t,l)||i;else if("string"==(o=typeof l))t.push(document.createTextNode(l));else if("function"===o)if(n){for(;"function"==typeof l;)l=l();i=F(t,Array.isArray(l)?l:[l])||i}else t.push(l),i=!0;else t.push(document.createTextNode(l.toString()))}return i}function J(t,e,n){for(let i=0,r=e.length;i<r;i++)t.insertBefore(e[i],n)}function z(t,e,n,i){if(void 0===n)return t.textContent="";const r=i||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const l=e[o];if(r!==l){const e=l.parentNode===t;i||o?e&&t.removeChild(l):e?t.replaceChild(r,l):t.insertBefore(r,n)}else i=!0}}else t.insertBefore(r,n);return[r]}const U=Symbol("store-raw"),K=Symbol("store-node"),W=Symbol("store-name");function G(e,n){let i=e[t];if(!i){Object.defineProperty(e,t,{value:i=new Proxy(e,Q)});const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let t=0,o=n.length;t<o;t++){const o=n[t];if(r[o].get){const t=r[o].get.bind(i);Object.defineProperty(e,o,{get:t})}}}return i}function H(t){return null!=t&&"object"==typeof t&&(!t.__proto__||t.__proto__===Object.prototype||Array.isArray(t))}function V(t,e=new Set){let n,i,r,o;if(n=null!=t&&t[U])return n;if(!H(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let n=0,o=t.length;n<o;n++)r=t[n],(i=V(r,e))!==r&&(t[n]=i)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const n=Object.keys(t),l=Object.getOwnPropertyDescriptors(t);for(let s=0,c=n.length;s<c;s++)o=n[s],l[o].get||(r=t[o],(i=V(r,e))!==r&&(t[o]=i))}return t}function X(t){let e=t[K];return e||Object.defineProperty(t,K,{value:e={}}),e}function Y(){const[t,e]=f(void 0,{equals:!1});return t.$=e,t}const Q={get(e,n,i){if(n===U)return e;if(n===t)return i;const r=e[n];if(n===K||"__proto__"===n)return r;const o=H(r);if(m()&&("function"!=typeof r||e.hasOwnProperty(n))){let t,i;o&&(t=X(r))&&(i=t._||(t._=Y()),i()),t=X(e),i=t[n]||(t[n]=Y()),i()}return o?G(r):r},set:()=>!0,deleteProperty:()=>!0,ownKeys:function(t){if(m()){const e=X(t);(e._||(e._=Y()))()}return Reflect.ownKeys(t)},getOwnPropertyDescriptor:function(e,n){const i=Reflect.getOwnPropertyDescriptor(e,n);return!i||i.get||n===t||n===K||n===W||(delete i.value,delete i.writable,i.get=()=>e[t][n]),i}};function Z(t,e,n){if(t[e]===n)return;const i=Array.isArray(t),r=t.length,o=void 0===n,l=i||o===e in t;o?delete t[e]:t[e]=n;let s,c=X(t);(s=c[e])&&s.$(),i&&t.length!==r&&(s=c.length)&&s.$(s,void 0),l&&(s=c._)&&s.$(s,void 0)}function tt(t,e,n=[]){let i,r=t;if(e.length>1){i=e.shift();const o=typeof i,l=Array.isArray(t);if(Array.isArray(i)){for(let r=0;r<i.length;r++)tt(t,[i[r]].concat(e),[i[r]].concat(n));return}if(l&&"function"===o){for(let r=0;r<t.length;r++)i(t[r],r)&&tt(t,[r].concat(e),[r].concat(n));return}if(l&&"object"===o){const{from:r=0,to:o=t.length-1,by:l=1}=i;for(let i=r;i<=o;i+=l)tt(t,[i].concat(e),[i].concat(n));return}if(e.length>1)return void tt(t[i],e,[i].concat(n));r=t[i],n=[i].concat(n)}let o=e[0];"function"==typeof o&&(o=o(r,n),o===r)||void 0===i&&null==o||(o=V(o),void 0===i||H(r)&&H(o)&&!Array.isArray(o)?function(t,e){const n=Object.keys(e);for(let i=0;i<n.length;i+=1){const r=n[i];Z(t,r,e[r])}}(r,o):Z(t,i,o))}function et(t,e,n,i,r){const o=e[n];if(t===o)return;if(!H(t)||!H(o)||r&&t[r]!==o[r])return void(t!==o&&Z(e,n,t));if(Array.isArray(t)){if(t.length&&o.length&&(!i||r&&null!=t[0][r])){let e,n,l,s,c,a,u,d;for(l=0,s=Math.min(o.length,t.length);l<s&&(o[l]===t[l]||r&&o[l][r]===t[l][r]);l++)et(t[l],o,l,i,r);const f=new Array(t.length),h=new Map;for(s=o.length-1,c=t.length-1;s>=l&&c>=l&&(o[s]===t[c]||r&&o[s][r]===t[c][r]);s--,c--)f[c]=o[s];if(l>c||l>s){for(n=l;n<=c;n++)Z(o,n,t[n]);for(;n<t.length;n++)Z(o,n,f[n]),et(t[n],o,n,i,r);return void(o.length>t.length&&Z(o,"length",t.length))}for(u=new Array(c+1),n=c;n>=l;n--)a=t[n],d=r?a[r]:a,e=h.get(d),u[n]=void 0===e?-1:e,h.set(d,n);for(e=l;e<=s;e++)a=o[e],d=r?a[r]:a,n=h.get(d),void 0!==n&&-1!==n&&(f[n]=o[e],n=u[n],h.set(d,n));for(n=l;n<t.length;n++)n in f?(Z(o,n,f[n]),et(t[n],o,n,i,r)):Z(o,n,t[n])}else for(let e=0,n=t.length;e<n;e++)et(t[e],o,e,i,r);return void(o.length>t.length&&Z(o,"length",t.length))}const l=Object.keys(t);for(let e=0,n=l.length;e<n;e++)et(t[l[e]],o,l[e],i,r);const s=Object.keys(o);for(let e=0,n=s.length;e<n;e++)void 0===t[s[e]]&&Z(o,s[e],void 0)}function nt(t,e={}){const{merge:n,key:i="id"}=e,r=V(t);return t=>{const e=t;return H(e)&&H(r)?(et(r,{state:e},"state",n,i),e):r}}function it(t){return g((()=>{if(null!=t.when){const e=t.children;return b((()=>e(t.when)))}return t.fallback}))}function rt(t){return g((()=>{let e=t.children[t.item.kind];if(!e&&(e=t.children.unsupported,!e))throw new Error("condition "+t.item.kind+" was not handled and no unsupported branch");const n=t.item;return b((()=>e(n)))}))}const ot=M('<div><button class="btn">Create D20</button><button class="btn">Create link to frame</button><button class="btn">Create thing</button><div>Click Mode:<button class="btn">Click</button><button class="btn">Instant</button></div></div>'),lt=M("<hr>"),st=M("<pre><code></code></pre>"),ct=M("<div>Length (Excludes curves/bends): <!>px</div>"),at=M("<div>Scale: <!>mi/px</div>"),ut=M("<div>Miles: <!>mi</div>"),dt=M("<div>Transport Speed: <!>d/mi</div>"),ft=M("<div>Days: <!>d</div>"),ht=M('<button class="btn">‚óã Activate</button>'),gt=M('<div><h1 class="heading">Dice</h1><div><label>Min: <input class="input" type="number"></label></div><div><label>Max: <input class="input" type="number"></label></div><button class="btn">Save</button></div>'),pt=M('<div><h1 class="heading">Frame Link</h1><div>Link to: [TODO]</div><div><label><input type="checkbox"> Make back button</label></div><button class="btn">Save</button></div>'),bt=M("<div>not editable</div>"),mt=M("<div>TODO edit </div>"),vt=M("<div></div>");location.pathname.endsWith("-dev.html")&&fetch("http://localhost:8020/bundle.css").then((t=>t.text())).then((t=>{const e=document.createElement("style");e.textContent=t,document.head.appendChild(e)}));const yt=new URLSearchParams(location.search);let wt="ENOID";function kt(t){return location.pathname.endsWith("-dev.html")?"/mirodnd/app-dev.html?page="+encodeURIComponent(t):"/mirodnd/app.html?page="+encodeURIComponent(t)}const xt=yt.get("page");async function St(){const t=await miro.board.viewport.get(),e=Math.min(t.width/10,t.height/10);return{x:t.x+t.width/2,y:t.y+t.height/2,width:e,height:e}}function Ct(t){const e=(Math.random()*(t.max+1-t.min)|0)+t.min;return 1===t.min&&6===t.max?[..."‚öÄ‚öÅ‚öÇ‚öÉ‚öÑ‚öÖ"][e-1]:1===t.min?"d"+t.max+": "+e:"Num: "+e}async function At(t){if(1!==t.length)return{activated:!1};const e=t[0],n=e.metadata[wt];if(!n)return{activated:!1};if("random"===n.kind){const[t]=await miro.board.widgets.get({id:e.id,type:"STICKER"});return t?(t.text=Ct(n),void await miro.board.widgets.update(t)):void miro.showErrorNotification("dice error. try making new dice.")}if("frame_link"!==n.kind){if("back_link"===n.kind)return await miro.board.viewport.set(n.viewport),void await miro.board.widgets.deleteById(e.id);miro.showErrorNotification("error, unsupported kind "+n.kind)}else{const[t]=await miro.board.widgets.get({id:n.frame_id,type:"FRAME"});if(!t)return void miro.showErrorNotification("link error. maybe the link was deleted? try making a new link");const e=await miro.board.viewport.get();if(await miro.board.viewport.set({x:t.x-t.width/2,y:t.y-t.height/2,width:t.width,height:t.height}),n.create_back_button??1){const n={kind:"back_link",viewport:{x:e.x,y:e.y,width:e.width,height:e.height}},i=Math.min(t.width/10,t.height/10),r=i,o=i/3;await miro.board.widgets.create({type:"shape",text:"< Back",x:t.x-t.width/2+r/2,y:t.y-t.height/2+o/2,width:r,height:o,metadata:{[wt]:n}})}}}function _t(){return(()=>{const t=ot.cloneNode(!0),e=t.firstChild,n=e.nextSibling,i=n.nextSibling,r=i.nextSibling.firstChild.nextSibling,o=r.nextSibling;return e.$$click=async()=>{await miro.board.widgets.create({type:"sticker",text:"Click to Roll",...await St(),metadata:{[wt]:{kind:"random",min:1,max:20}}})},n.$$click=async()=>{const t=await miro.board.selection.get();if(1!==t.length)return void miro.showErrorNotification("select frame then click");const e=t[0];if("FRAME"!==e.type)return void miro.showErrorNotification("need frame");const n={kind:"frame_link",frame_id:e.id};await miro.board.widgets.create({type:"sticker",text:"Jump",...await St(),metadata:{[wt]:n}})},i.$$click=async()=>{var t;await miro.board.widgets.create({type:"embed",...await St(),html:'<iframe src="'+(t="unsupported","https://pfg.pw"+kt(t)+'"></iframe>')})},r.$$click=()=>{localStorage.setItem("cfg-clickmode","click")},o.$$click=()=>{localStorage.setItem("cfg-clickmode","instant")},t})()}function Nt(t){return j(it,{get when(){return t.selection.meta},get fallback(){return[j(P,{get children(){return j(L,{get when(){return"LINE"===t.selection.widget.type},get children(){return b((()=>{const e=()=>t.selection.widget,n=()=>Math.hypot(e().startPosition.x-e().endPosition.x,e().startPosition.y-e().endPosition.y),i=()=>.00836517049*n();return[(()=>{const t=ct.cloneNode(!0),e=t.firstChild.nextSibling;return e.nextSibling,R(t,(()=>n().toLocaleString()),e),t})(),(()=>{const t=at.cloneNode(!0),e=t.firstChild.nextSibling;return e.nextSibling,R(t,(()=>.00836517049.toLocaleString()),e),t})(),(()=>{const t=ut.cloneNode(!0),e=t.firstChild.nextSibling;return e.nextSibling,R(t,(()=>i().toLocaleString()),e),t})(),(()=>{const t=dt.cloneNode(!0),e=t.firstChild.nextSibling;return e.nextSibling,R(t,(()=>400..toLocaleString()),e),t})(),(()=>{const t=ft.cloneNode(!0),e=t.firstChild.nextSibling;return e.nextSibling,R(t,(()=>(i()*(1/400)).toLocaleString()),e),t})()]}))}})}}),lt.cloneNode(!0),(()=>{const e=st.cloneNode(!0);return R(e.firstChild,(()=>JSON.stringify(t.selection.widget,null,"  "))),e})()]},children:e=>[(()=>{const e=ht.cloneNode(!0);return e.$$click=async()=>{await At([t.selection.widget])},e})(),j(rt,{item:e,children:{random:e=>{const[n,i]=f({...e});return(()=>{const r=gt.cloneNode(!0),o=r.firstChild.nextSibling,l=o.firstChild.firstChild.nextSibling,s=o.nextSibling,c=s.firstChild.firstChild.nextSibling,a=s.nextSibling;return l.value=""+n().min,l.$$input=t=>i((e=>({...e,min:+t.currentTarget.value}))),(t=>{t.value=""+n().max})(c),c.$$input=t=>i((e=>({...e,max:+t.currentTarget.value}))),a.$$click=async()=>{Object.assign(e,n()),t.selection.widget.text=Ct(e),await miro.board.widgets.update(t.selection.widget),i({...e})},h((()=>a.disabled=JSON.stringify(n())===JSON.stringify(e))),r})()},frame_link:e=>{const[n,i]=f({...e});return(()=>{const r=pt.cloneNode(!0),o=r.firstChild.nextSibling.nextSibling,l=o.firstChild.firstChild,s=o.nextSibling;return l.$$input=t=>i((t=>({...t,create_back_button:!(t.create_back_button??1)}))),s.$$click=async()=>{Object.assign(e,n()),await miro.board.widgets.update(t.selection.widget),i({...e})},h((t=>{const i=n().create_back_button??!0,r=JSON.stringify(n())===JSON.stringify(e);return i!==t._v$&&(l.checked=t._v$=i),r!==t._v$2&&(s.disabled=t._v$2=r),t}),{_v$:void 0,_v$2:void 0}),r})()},back_link:t=>bt.cloneNode(!0),unsupported:t=>(()=>{const e=mt.cloneNode(!0);return e.firstChild,R(e,(()=>t.kind),null),e})()}})]})}function Ot(t){return(()=>{const e=vt.cloneNode(!0);return R(e,j(it,{get when(){return t.selection},get fallback(){return j(_t,{})},children:t=>j(Nt,{selection:t})})),e})()}function $t(){const[t,e]=function(t,e){const n=V(t||{});return[G(n),function(...t){p((()=>tt(n,t)))}]}({value:null}),n=document.createElement("div");document.body.appendChild(n),I((()=>j(Ot,{get selection(){return t.value}})),n);const i=async n=>{const i=await miro.board.selection.get();if(console.log(i),1!==i.length)return e({value:null});const r=i[0],o=r.metadata[wt];t.value&&t.value.widget.id===r.id?e(nt({value:{widget:r,meta:o}},{merge:!0})):e({value:{widget:r,meta:o}})};miro.addListener("SELECTION_UPDATED",(t=>{i()})),miro.addListener("CANVAS_CLICKED",(t=>{i()}))}function Et(){document.body.appendChild(document.createTextNode("You should not be seeing this."));miro.onReady((()=>{miro.initialize({extensionPoints:{bottomBar:{title:"Rüô≤O",svgIcon:'<circle cx="12" cy="12" r="9" fill="none" fill-rule="evenodd" stroke="currentColor" stroke-width="2"/>',onClick:async()=>{if(await miro.isAuthorized()||await miro.requestAuthorization(),"click"===(localStorage.getItem("cfg-clickmode")??"click")){const t=await miro.board.selection.get();if(!await At(t))return}await miro.board.ui.openLeftSidebar(kt("side_panel"))}}}}).catch((t=>console.log("plugin init error",t)));miro.addListener("SELECTION_UPDATED",(t=>{(async t=>{const e=t.data;if(1!==e.length)return;const n=e[0];if(!n.metadata[wt])return;if("instant"!==localStorage.getItem("cfg-clickmode"))return void miro.showNotification("Click the circle button to activate.");const i=await miro.board.widgets.get({id:n.id});await At(i)})(t)}))}))}function jt(){"side_panel"===xt?$t():null==xt?Et():document.body.appendChild(document.createTextNode("404 not found page: "+xt))}miro.onReady?miro.onReady((()=>{wt=miro.getClientId(),jt()})):jt(),function(t,e=window.document){const n=e[D]||(e[D]=new Set);for(let i=0,r=t.length;i<r;i++){const r=t[i];n.has(r)||(n.add(r),e.addEventListener(r,B))}}(["click","input"])}();
//# sourceMappingURL=out.js.map
